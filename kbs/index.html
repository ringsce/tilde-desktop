<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kayte Build System - IDE</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/Lato.css">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/fonts/simple-line-icons.min.css">
    <link rel="stylesheet" href="assets/css/bss-overrides.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
</head>
<body class="dark-mode">
    <div class="ide-container">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <div class="logo">
                    <div class="logo-icon">üî®</div>
                    <span>Kayte Build System</span>
                </div>
                <div class="header-nav">
                    <div class="nav-item active" onclick="setActiveNav(0)">Dashboard</div>
                    <div class="nav-item" onclick="setActiveNav(1)">Projects</div>
                    <div class="nav-item" onclick="setActiveNav(2)">Settings</div>
                </div>
            </div>
            <div class="header-right">
                <button id="themeToggle" class="toolbar-btn" onclick="toggleTheme()">‚òÄÔ∏è Light Mode</button>
            </div>
        </div>

        <!-- Menu Bar -->
        <div class="menu-bar">
            <div class="menu-item">File</div>
            <div class="menu-item">Edit</div>
            <div class="menu-item">Project</div>
            <div class="menu-item">Build</div>
            <div class="menu-item">Tools</div>
            <div class="menu-item">Help</div>
        </div>

        <!-- Toolbar -->
        <div class="toolbar">
            <button class="toolbar-btn" onclick="newProject()">üìÑ New</button>
            <button class="toolbar-btn" onclick="openProject()">üìÅ Open</button>
            <button class="toolbar-btn" onclick="saveProject()">üíæ Save</button>
            <div class="toolbar-divider" style="width: 1px; margin: 0 4px;"></div>
            <button class="toolbar-btn" onclick="buildProject()">üî® Build</button>
            <button class="toolbar-btn" onclick="runProject()">‚ñ∂Ô∏è Run</button>
            <button class="toolbar-btn" onclick="debugProject()">üêõ Debug</button>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-header">Project Explorer</div>
                <div class="sidebar-content">
                    <div class="tree-item selected">üì¶ Kayte Build System</div>
                    <div class="tree-item" style="padding-left: 24px;">üóÇÔ∏è Resources</div>
                </div>
            </div>

            <!-- Work Area -->
            <div class="work-area">
                <div class="tab-bar">
                    <div class="tab active" onclick="switchTab(0)">MainForm</div>
                    <div class="tab" onclick="switchTab(1)">Build Configuration</div>
                    <div class="tab" onclick="switchTab(2)">Output</div>
                    <div class="tab" onclick="switchTab(3)">Projects</div>
                    <div class="tab" onclick="switchTab(4)">Git</div>
                </div>

                <!-- Tab 0: MainForm -->
                <div class="tab-content active">
                    <div class="form-container">
                        <div class="form-title">Kayte Build System - Main Form</div>
                        
                        <div class="form-group">
                            <label class="form-label">Project File:</label>
                            <div style="display: flex; gap: 8px;">
                                <input type="text" class="form-input" value="" id="projectFile" placeholder="Select .lpi, .lpr, .dpr, or CMakeLists.txt" style="flex: 1;" readonly>
                                <input type="file" id="fileInput" accept=".lpi,.lpr,.dpr,.txt" style="display: none;" onchange="handleProjectFile(event)">
                                <button class="btn" onclick="document.getElementById('fileInput').click()">Browse...</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Project Name:</label>
                            <input type="text" class="form-input" value="MyProject" id="projectName">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Build Target:</label>
                            <select class="form-input" id="buildTarget">
                                <option>Debug</option>
                                <option>Release</option>
                                <option>Production</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Output Directory:</label>
                            <input type="text" class="form-input" value="./bin" id="outputDir">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Build Mode:</label>
                            <select class="form-input" id="buildMode">
                                <option value="lazbuild">Use lazbuild (Lazarus projects)</option>
                                <option value="fpc">Use fpc directly (Pascal files)</option>
                                <option value="cmake">Use CMake (CMakeLists.txt)</option>
                            </select>
                        </div>

                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="startBuild()">Build Project</button>
                            <button class="btn" onclick="cleanBuild()">Clean</button>
                            <button class="btn" onclick="rebuildAll()">Rebuild All</button>
                        </div>
                    </div>
                </div>

                <!-- Tab 1: Build Configuration -->
                <div class="tab-content">
                    <div class="form-container">
                        <div class="form-title">Build Configuration</div>
                        
                        <div class="form-group">
                            <label class="form-label">FreePascal Compiler (fpc):</label>
                            <input type="text" class="form-input" value="" id="fpcPath" placeholder="Detecting...">
                            <button class="btn" onclick="detectFPC()" style="margin-top: 5px;">Detect FPC Path</button>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Lazarus lazbuild:</label>
                            <input type="text" class="form-input" value="/Applications/Lazarus/lazbuild" id="lazbuildPath">
                            <button class="btn" onclick="detectLazbuild()" style="margin-top: 5px;">Detect Lazbuild</button>
                        </div>

                        <div class="form-group">
                            <label class="form-label">CMake Path:</label>
                            <input type="text" class="form-input" value="" id="cmakePath" placeholder="Detecting...">
                            <button class="btn" onclick="detectCMake()" style="margin-top: 5px;">Detect CMake</button>
                        </div>

                        <div class="form-group">
                            <label class="form-label">CMake Generator:</label>
                            <select class="form-input" id="cmakeGenerator">
                                <option>Unix Makefiles</option>
                                <option>Ninja</option>
                                <option>Xcode</option>
                                <option>Visual Studio 17 2022</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Compiler Options:</label>
                            <input type="text" class="form-input" value="-O2 -MObjFPC -Scghi" id="compilerOpts">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Target Platform:</label>
                            <select class="form-input" id="targetPlatform">
                                <option>darwin-x86_64</option>
                                <option>darwin-aarch64</option>
                                <option>linux-x86_64</option>
                                <option>linux-aarch64</option>
                                <option>win64-x86_64</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Include Paths:</label>
                            <input type="text" class="form-input" value="./include;./lib" id="includePaths">
                        </div>

                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="saveConfig()">Save Configuration</button>
                            <button class="btn" onclick="resetConfig()">Reset to Default</button>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: Output -->
                <div class="tab-content">
                    <div class="output-panel" id="outputPanel">
                        <div class="output-line">Kayte Build System v1.0.0</div>
                        <div class="output-line">Ready to build...</div>
                    </div>
                </div>
                
                <!-- Tab 3: Projects (Packages) -->
                <div class="tab-content">
                    <div style="padding: 20px;">
                        <h2 style="margin-bottom: 20px; color: #0078d7;">üì¶ Distribution Packages</h2>
                        
                        <div class="form-group">
                            <label class="form-label">Package Format:</label>
                            <select class="form-input" id="packageFormat" style="max-width: 300px;">
                                <option value="dmg">macOS Disk Image (.dmg)</option>
                                <option value="tar.gz">Compressed Archive (.tar.gz)</option>
                                <option value="zip">ZIP Archive (.zip)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Package Name:</label>
                            <input type="text" class="form-input" id="packageName" placeholder="MyApp-v1.0" style="max-width: 300px;">
                        </div>

                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="createPackage()">Create Package</button>
                            <button class="btn" onclick="clearPackages()">Clear All</button>
                        </div>

                        <div style="margin-top: 30px;">
                            <h3 style="margin-bottom: 15px;">Available Packages</h3>
                            <div id="packagesList" style="background: rgba(0,0,0,0.1); border: 1px solid rgba(0,0,0,0.2); border-radius: 4px; padding: 15px; min-height: 200px;">
                                <p style="opacity: 0.6; text-align: center; padding: 40px;">No packages created yet. Build a project and create a package.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 4: Git -->
                <div class="tab-content">
                    <div style="padding: 20px;">
                        <h2 style="margin-bottom: 20px; color: #0078d7;">üîÄ Git Version Control</h2>
                        
                        <!-- Repository Status -->
                        <div class="git-section">
                            <h3 style="margin-bottom: 10px;">Repository Status</h3>
                            <div id="gitStatus" class="git-status-box">
                                <p style="opacity: 0.6;">No Git repository initialized</p>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="git-section" style="margin-top: 20px;">
                            <h3 style="margin-bottom: 10px;">Quick Actions</h3>
                            <div class="btn-group">
                                <button class="btn btn-primary" onclick="gitInit()">üìÅ Init Repository</button>
                                <button class="btn" onclick="gitStatus()">üìä Status</button>
                                <button class="btn" onclick="gitPull()">‚¨áÔ∏è Pull</button>
                                <button class="btn" onclick="gitPush()">‚¨ÜÔ∏è Push</button>
                            </div>
                        </div>

                        <!-- Commit Section -->
                        <div class="git-section" style="margin-top: 20px;">
                            <h3 style="margin-bottom: 10px;">Commit Changes</h3>
                            <div class="form-group">
                                <label class="form-label">Commit Message:</label>
                                <textarea class="form-input" id="commitMessage" placeholder="Enter commit message..." rows="3"></textarea>
                            </div>
                            <div class="btn-group">
                                <button class="btn btn-primary" onclick="gitCommit()">‚úì Commit</button>
                                <button class="btn" onclick="gitAdd()">‚ûï Stage All</button>
                            </div>
                        </div>

                        <!-- Branch Management -->
                        <div class="git-section" style="margin-top: 20px;">
                            <h3 style="margin-bottom: 10px;">Branch Management</h3>
                            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                                <input type="text" class="form-input" id="branchName" placeholder="New branch name" style="flex: 1; max-width: 300px;">
                                <button class="btn" onclick="gitCreateBranch()">üåø Create Branch</button>
                            </div>
                            <div id="branchList" class="git-branch-list">
                                <div class="branch-item active">
                                    <span>üåø main</span>
                                    <span style="color: #0078d7; font-size: 11px;">CURRENT</span>
                                </div>
                            </div>
                        </div>

                        <!-- Commit History -->
                        <div class="git-section" style="margin-top: 20px;">
                            <h3 style="margin-bottom: 10px;">Commit History</h3>
                            <div id="commitHistory" class="git-commit-history">
                                <p style="opacity: 0.6; text-align: center; padding: 20px;">No commits yet</p>
                            </div>
                        </div>

                        <!-- Remote Repository -->
                        <div class="git-section" style="margin-top: 20px;">
                            <h3 style="margin-bottom: 10px;">Remote Repository</h3>
                            <div class="form-group">
                                <label class="form-label">Remote URL:</label>
                                <input type="text" class="form-input" id="remoteUrl" placeholder="https://github.com/username/repo.git">
                            </div>
                            <div class="btn-group">
                                <button class="btn btn-primary" onclick="gitAddRemote()">üîó Add Remote</button>
                                <button class="btn" onclick="gitClone()">üì• Clone</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <span id="statusText">Ready</span>
            <span id="statusInfo">Lines: 0 | Col: 0</span>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-left">
                <span>¬© 2025 Kayte Build System</span>
                <a class="footer-link" href="#" onclick="showAbout(); return false;">About</a>
                <a class="footer-link" href="#" onclick="showDocs(); return false;">Documentation</a>
                <a class="footer-link" href="#" onclick="showSupport(); return false;">Support</a>
            </div>
            <div class="footer-right">
                <span>v1.0.0</span>
                <span title="GitHub">‚≠ê</span>
                <span title="Discord">üí¨</span>
            </div>
        </div>
    </div>

    <!-- External JavaScript -->
    <script src="assets/js/app.js"></script>
    
    <!-- Theme Toggle -->
    <script>
        function toggleTheme() {
            const body = document.body;
            const toggleBtn = document.getElementById('themeToggle');
            
            if (body.classList.contains('dark-mode')) {
                body.classList.remove('dark-mode');
                body.classList.add('light-mode');
                toggleBtn.innerHTML = 'üåô Dark Mode';
            } else {
                body.classList.remove('light-mode');
                body.classList.add('dark-mode');
                toggleBtn.innerHTML = '‚òÄÔ∏è Light Mode';
            }
        }
    </script>
</body>
</html>